"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[764],{4764:(t,e,n)=>{n.r(e),n.d(e,{default:()=>l});n(3508);var s=n(2791),o=n(7689),a=n(7803),r=n(3832),c=n(184);const i=t=>{const[e,n]=r.ZP.useMessage(),a=((0,o.s0)(),(0,s.useRef)(""));return(0,c.jsxs)("div",{className:"card col",style:{width:"18rem"},children:[n,(0,c.jsx)("img",{src:t.image,className:"card-img-top",alt:"Plant"}),(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsx)("h4",{className:"text-warning",children:"AI's Prediction"}),(0,c.jsx)("h5",{className:"card-title",children:t.title}),t.description?(0,c.jsxs)("p",{className:"card-text text-start",children:[(0,c.jsx)("span",{children:(0,c.jsx)("b",{className:"text-warning",children:"Expert's Opinion :"})}),t.description]}):(0,c.jsx)("div",{children:(0,c.jsxs)("form",{onSubmit:async n=>{n.preventDefault(),e.loading({content:"Updating Information"});const s=a.current.value;try{const n=await fetch("".concat("http://localhost:5000/api/","notes/updatenote/").concat(t.noteId),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({description:s})});if(404===n.status)return void e.error({content:"Note was not found"});if(!n.ok)return void e.error({content:"Could not update the note"});e.destroy(),e.success({content:"Information Updated"}),t.getAllNotesAdmin()}catch(o){e.error({content:"Error Updating Information"}),console.log(o)}},className:"mt-4 w-100",children:[(0,c.jsx)("label",{htmlFor:"ExpertInput",children:(0,c.jsx)("span",{className:"text-info fs-4",children:"Expert's Opinion :"})}),(0,c.jsx)("input",{type:"tel",name:"",id:"ExpertInput",ref:a}),(0,c.jsx)("button",{className:"btn btn-outline-info mt-2",children:"confirm"})]})})]})]})},l=()=>{const t=(0,o.s0)(),[e,n]=(0,s.useState)([]);(0,s.useEffect)((()=>{localStorage.getItem("token")?localStorage.getItem("isAdmin")?r():t("/home"):t("/login")}),[]);const r=async()=>{try{const t=await fetch("".concat("http://localhost:5000/api/","notes/getallnotesAdmin"),{method:"GET",headers:{"auth-token":localStorage.getItem("token")}});if(!t.ok)return console.log(t),void a.Z.error({title:"Error",content:"Error fetching notes"});const e=await t.json();n(e)}catch(t){a.Z.error({title:"Error",content:"Please Check Internet connectivity or try after sometime"})}};return(0,c.jsx)(c.Fragment,{children:e.length?(0,c.jsx)("div",{className:"container my-5 note-container ",children:e.map((t=>(0,c.jsx)(i,{noteId:t._id,baseImage:t.baseImage,description:t.description,title:t.title,image:t.baseImage,getAllNotesAdmin:r},t._id)))}):(0,c.jsxs)("div",{className:"container",children:[(0,c.jsx)("p",{className:"w-100 fs-1 fw-semibold text-center my-5",children:"No Notes Found"}),(0,c.jsxs)("button",{className:"btn btn-primary mx-auto",onClick:r,children:[" ","Reload"," "]})]})})}},3508:()=>{}}]);
//# sourceMappingURL=764.7275d481.chunk.js.map