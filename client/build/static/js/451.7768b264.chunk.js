"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[451],{4451:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});a(3508),a(4980);var n=a(5559),s=a(2791),o=a(7689),c=a(3832),l=a(184);const r=()=>{const e=(0,s.useContext)(n.Z),[t,a]=c.ZP.useMessage(),r="http://localhost:5000/api/",{notes:i,setNotes:d}=e,[g,m]=(0,s.useState)(null),[u,h]=(0,s.useState)(null),[p,f]=(0,s.useState)(!1),x=(0,o.s0)();(0,s.useEffect)((()=>{localStorage.getItem("token")?y():x("/login")}),[]);let y=async()=>{try{const e=await fetch("".concat(r,"notes/getallnotes"),{method:"GET",headers:{"auth-token":localStorage.getItem("token")}});if(!e.ok)return;const t=await e.json();d(t)}catch(e){console.error("Error fetching notes:",e)}};return(0,l.jsxs)("div",{className:" pt-3 pb-3 ",children:[a,(0,l.jsxs)("div",{className:"container d-flex flex-column align-items-center justify-content-center text-xxl-center backgroundImage w-75",children:[(0,l.jsxs)("h2",{className:"text-center fs-1 font-monospace pt-3 ",style:{color:"red"},children:[" ","Welcome back,"," ",localStorage.getItem("username")?localStorage.getItem("username"):"username"," ","!!!"]}),(0,l.jsxs)("div",{className:"image-upload-container  ",children:[(0,l.jsxs)("div",{className:"img ",children:[(0,l.jsx)("input",{type:"file",accept:"image/*",name:"",id:"image_upload",hidden:!0,onChange:e=>{let t=e.target.files[0];m(t);const a=new FileReader;try{a.onload=function(e){const t=new Image;t.onload=function(){const e=document.createElement("canvas"),a=e.getContext("2d");e.width=t.width,e.height=t.height,a.drawImage(t,0,0);const n=e.toDataURL("image/png");h(n)},t.src=e.target.result},a.readAsDataURL(t)}catch(n){}}}),(0,l.jsx)("label",{htmlFor:"image_upload",className:"w-100 h-100 d-flex align-items-center justify-content-center",children:g?(0,l.jsx)("img",{src:URL.createObjectURL(g),alt:"selectedImage",className:"w-100 h-100"}):(0,l.jsx)("img",{src:"upload.png",alt:"Browse Images",className:"w-50 h-100"})})]}),(0,l.jsx)("button",{className:"btn btn-outline-dark border-2 w-100 my-3 text-dark-emphasis fs-4",onClick:async()=>{f(!0);try{t.open({type:"loading",content:"Uploading Image...",duration:0});const e=await fetch("".concat(r,"notes/addnote"),{method:"POST",headers:{"Content-Type":"application/json","auth-token":localStorage.getItem("token")},body:JSON.stringify({baseImage:u})});if(!e.ok)return t.destroy(),t.error("Error Uploading Image"),void f(!1);const a=await e.json(),n=i;n.push(a),d(n),m(null),y(),t.destroy(),t.success("Successfully uploaded image"),f(!1)}catch(e){t.destroy(),t.error("Error Uploading Image"),f(!1),console.error("Error Uploading notes:",e)}},disabled:!g||p,children:"Upload Image"})]})]})]})}},3508:()=>{},4980:()=>{}}]);
//# sourceMappingURL=451.7768b264.chunk.js.map