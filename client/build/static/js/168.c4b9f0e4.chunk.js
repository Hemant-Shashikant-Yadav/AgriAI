"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[168],{2168:(e,s,a)=>{a.r(s),a.d(s,{default:()=>d});var t=a(2791),r=a(7689),l=a(1087),n=a(7803),i=a(3832),o=a(43),c=a(184);const d=()=>{const[e,s]=(0,t.useState)({email:"",password:""}),[a,d]=(0,t.useState)({}),[m,u]=(0,t.useState)(!1),p=(0,r.s0)(),h=e=>{let s={};return e.email.trim()?g(e.email)||(s.email="Invalid email address"):s.email="Email is required",e.password.trim()?e.password.length<8&&(s.password="Password should be at least 8 characters"):s.password="Password is required",s},g=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),w=t=>{s({...e,[t.target.id]:t.target.value}),d({...a,[t.target.id]:""})};return(0,c.jsx)("div",{className:"container-fluid p-3 my-5 h-custom",children:(0,c.jsxs)("div",{className:"row",children:[(0,c.jsx)("div",{className:"col-lg-6 col-sm-12 col-md-6",children:(0,c.jsx)("img",{src:"https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-login-form/draw2.webp",className:"img-fluid",alt:"Sample image"})}),(0,c.jsxs)("form",{onSubmit:async s=>{s.preventDefault(),u(!0);const a=h(e);if(0!==Object.keys(a).length)return d(a),void u(!1);try{const s=await fetch("".concat("http://localhost:5000/api/","auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email,password:e.password})});if(404===s.status)return n.Z.error({title:"Error",content:"User not found please create an account first"}),p("/signup"),void u(!1);if(401===s.status)return n.Z.error({title:"Error",content:"Invalid Credentials"}),void u(!1);if(!s.ok)return n.Z.error({title:"Error",content:"Unknown Error"}),void u(!1);const a=await s.json();localStorage.setItem("token",a.authToken),localStorage.setItem("username",a.username),u(!1),p("/"),i.ZP.success({title:"Success",content:"Login Successful"})}catch(t){n.Z.error({title:"Error",content:"Error connecting to backend please check internet connection OR try after sometime"}),u(!1),console.error("Error during login request:",t)}},className:"col-sm-12 col-md-6 col-lg-6 my-lg-5 my-md-3 py-md-3 py-lg-5 my-sm-5",children:[(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email"}),(0,c.jsx)("input",{type:"email",className:"form-control ".concat(a.email?"is-invalid":""),id:"email",value:e.email,onChange:w}),a.email&&(0,c.jsx)("div",{className:"invalid-feedback",children:a.email})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{htmlFor:"password",className:"form-label",children:"Password"}),(0,c.jsx)("input",{type:"password",className:"form-control form-control-lg ".concat(a.password?"is-invalid":""),id:"password",value:e.password,onChange:w}),a.password&&(0,c.jsx)("div",{className:"invalid-feedback",children:a.password})]}),(0,c.jsx)("div",{className:"text-center mt-4 pt-2 w-25",children:(0,c.jsx)(o.Z,{spinning:m,children:(0,c.jsx)("button",{className:"w-100 btn btn-info",type:"submit",disabled:m,children:"Login"})})}),(0,c.jsx)("hr",{}),(0,c.jsxs)("p",{className:"small fw-bold mt-2 pt-1 mb-2",children:["Don't have an account?"," ",(0,c.jsx)(l.rU,{to:"/signup",className:"link link-info",children:"Register"})]})]})]})})}}}]);
//# sourceMappingURL=168.c4b9f0e4.chunk.js.map